<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">

<polymer-element name="socobo-ajax"
                 attributes="url method params authtoken"
                 extends="core-ajax">
<!--

  FUCK YOU AJAX

-->
  <core-ajax
    url="{{url}}"
    method="{{method}}"
    params='{{params}}'
    headers='{"X-AUTH-TOKEN":"{{authtoken}}"}'
    handleAs="json"
    contentType="application/json">
  </core-ajax>

  <!--
    on-core-response="{{handleOnResponse}}"
    on-core-error="{{handleOnError}}"

    response="{{handleOnResponse}}"
    error="{{handleOnError}}"
  -->

  <script>
    Polymer('socobo-ajax', {

      url: '',
      method: '',
      params: '',
      authtoken: '',

      go: function() {
        this.super();
      },

      response: function() {
        this.super();
      },

      error: function() {
        this.super();
      }

      /*handleOnResponse: function(e) {
        var statusCode = e.detail.xhr.status;
        if (statusCode === 200) {
          var responseData = e.detail.response;
          this.fire('socobo-ajax-response-ok', {responsedata: responseData});
        } else {
          this.fire('socobo-ajax-response-failed', {statusCode: statusCode});
        }
        //this.super();
      },

      handleOnError: function(e) {
        var statusCode = e.detail.xhr.status;
        this.fire('socobo-ajax-response-failed', {statusCode: statusCode});
        //this.super();
      }*/
    });
  </script>
</polymer-element>