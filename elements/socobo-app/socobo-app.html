<link rel="import" href="../socobo-imports/socobo-imports.html">
<script src="socobo-app.js"></script>


<polymer-element name="socobo-app">
  <template>
    <!-- Styling -->
    <link rel="stylesheet" href="socobo-app.css">
    <!-- Route controller -->
    <flatiron-director route="{{route}}" autoHash></flatiron-director>

    <!-- Drawer Panel -->
    <core-drawer-panel id="drawerPanel" responsiveWidth="600px" touch-action>

      <!-- Area: Drawer -->
      <core-header-panel mode="waterfall-tall" tallClass="medium-tall" shadow drawer>

        <!-- Area: Toolbar Drawer -->
        <div class="core-header">
          <core-toolbar id="core_toolbar_drawer" class="medium-tall" shadow>
            <span flex>menu</span>
            <div class="bottom fit" horizontal layout>
              <!-- Profile Pic -->
              <image-mask shape="square" size="50" src="{{userPictureUrl}}" title="User Profile Picture" on-click="{{goToMyProfile}}"></image-mask>
              <div class="bottom fit" vertical layout>
                <!-- Profile Username -->
                <p>{{userName}}</p>
                <!-- Profile Email -->
                <p>{{emailAddress}}</p>
              </div>
            </div>
          </core-toolbar>
        </div>

        <!-- Menu -->
        <div id="content">
          <core-menu valueattr="hash" selected="{{route}}" selectedModel="{{selectedPage}}">

            <template repeat="{{page in pages}}">
              <paper-item hash="{{page.hash}}" on-click="{{closeNavDrawer}}" noink>
                <core-icon icon="{{page.icon}}"></core-icon>
                <a href="#{{page.hash}}">{{page.name}}</a>
              </paper-item>
            </template>

          </core-menu>
        </div>
      </core-header-panel>

      <!-- Area: Main -->
      <core-header-panel mode="waterfall-tall" tallClass="medium-tall" shadow main>

        <!-- Area: Toolbar Main -->
        <div class="core-header">
          <core-toolbar id="core_toolbar_main" class="medium-tall" shadow>
            <paper-icon-button icon="menu" fill core-drawer-toggle></paper-icon-button>
            <span flex>socobo - social cookbook</span>
            <paper-icon-button icon="refresh" on-tap="{{refreshAction}}" fill></paper-icon-button>

            <paper-menu-button>
              <paper-icon-button icon="menu" fill noink></paper-icon-button>

              <paper-dropdown halign="right" duration="350" class="dropdown" transition="core-transition-fade">
                <core-menu id="menuRight" class="menu">
                  <paper-item on-click="{{showPopupSignup}}">
                    <core-icon icon="create"></core-icon>
                    <a>Signup</a>
                  </paper-item>
                  <paper-item on-click="{{showPopupLogin}}">
                    <core-icon icon="exit-to-app"></core-icon>
                    <a>Login</a>
                  </paper-item>
                  <paper-item on-click="{{showPopupLogout}}">
                    <core-icon icon="close"></core-icon>
                    <a>Logout</a>
                  </paper-item>
                  <paper-item on-click="{{settingsAction}}">
                    <core-icon icon="settings"></core-icon>
                    <a>Settings</a>
                  </paper-item>
                </core-menu>
              </paper-dropdown>
            </paper-menu-button>

          </core-toolbar>
        </div>

        <!-- Area: Content -->
        <div class="content">
          <core-pages selected="{{route}}" valueattr="hash">

            <div hash="home">
              <socobo-home vertical layout center center-justified></socobo-home>
            </div>

            <div hash="myprofile">
              <socobo-myprofile vertical layout center center-justified></socobo-myprofile>
            </div>

            <div hash="myfridge">
              <socobo-myfridge authToken="{{authToken}}"
                               vertical layout center center-justified></socobo-myfridge>
            </div>

            <div hash="myrecipes">
              <socobo-myrecipes vertical layout center center-justified></socobo-myrecipes>
            </div>

            <div hash="bugreport">
              <socobo-bugreport vertical layout center center-justified></socobo-bugreport>
            </div>

            <div hash="about">
              <socobo-about vertical layout center center-justified></socobo-about>
            </div>

          </core-pages>

          <!-- Popup - Area -->
          <socobo-signup-popup id="socoboSignupPopup"
                               on-signup-response-ok="{{signupOk}}"
                               on-signup-response-failed="{{signupFailed}}">
          </socobo-signup-popup>

          <socobo-login-popup id="socoboLoginPopup"
                              authToken="{{authToken}}"
                              on-login-response-ok="{{loginOk}}"
                              on-login-response-failed="{{loginFailed}}">
          </socobo-login-popup>

          <socobo-logout-popup id="socoboLogoutPopup"
                               authToken="{{authToken}}"
                               on-logout-response-ok="{{logoutOk}}"
                               on-logout-response-failed="{{logoutFailed}}">
          </socobo-logout-popup>
        </div>

        <paper-toast id="toast"
                     duration="1500"></paper-toast>

      </core-header-panel>
    </core-drawer-panel>
  </template>

  <script>
    Polymer('socobo-app', socoboApp);
  </script>
</polymer-element>
