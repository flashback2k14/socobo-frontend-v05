<link rel="import" href="../../socobo-imports/socobo-imports.html">
<script src="socobo-signup-popup.js"></script>


<polymer-element name="socobo-signup-popup">
  <template>
    <!-- Styling -->
    <link rel="stylesheet" href="socobo-signup-popup.css">
    <!-- Element Content -->
    <paper-dialog id="socoboSignupPopup" transition="core-transition-top" layered="false" backdrop autoCloseDisabled>
      <core-header-panel mode="waterfall" shadow>
        <div class="core-header">
          <paper-shadow z="2">
            <core-toolbar>
              <div id="div" on-click="{{closePopup}}" flex>Signup</div>
              <paper-fab icon="send"
                         on-click="{{signUpSubmit}}"
                         recenteringtouch end></paper-fab>
            </core-toolbar>
          </paper-shadow>
        </div>

        <br/>

        <div id="content">
          <paper-input-decorator label="Enter your username..." floatingLabel error="username is required! min. 3 digits" isInvalid="{{!$.paper_input_name.validity.valid}}" >
            <input is="core-input" id="paper_input_name" type="text" value="{{userName}}" required>
          </paper-input-decorator>

          <paper-input-decorator label="Enter your email address..." floatingLabel error="email is required!" isInvalid="{{!$.paper_input_email.validity.valid}}" >
            <input is="core-input" id="paper_input_email" type="email" value="{{email}}" required>
          </paper-input-decorator>

          <paper-input-decorator label="Enter your password..." floatingLabel error="password is required! min. 8 digits" isInvalid="{{!$.paper_input_password.validity.valid}}" >
            <input is="core-input" id="paper_input_password" type="password" value="{{password}}" required>
          </paper-input-decorator>

          <paper-input-decorator label="Enter your password again..." floatingLabel error="password is required! min. 8 digits" isInvalid="{{!$.paper_input_password_again.validity.valid}}" >
            <input is="core-input" id="paper_input_password_again" type="password" value="{{passwordRepeat}}" required>
          </paper-input-decorator>
        </div>

        <socobo-ajax id="socoboSignUpForm"
                     url="/signup"
                     method="POST"
                     params='{"userName":"{{userName}}", "email":"{{email}}", "password":"{{password}}","passwordRepeat":"{{passwordRepeat}}"}'
                     on-socobo-ajax-response-ok="{{handleSignupOnResponse}}"
                     on-socobo-ajax-response-failed="{{handleSignupOnError}}">
        </socobo-ajax>

      </core-header-panel>
    </paper-dialog>

    <paper-toast id="toast"
                 duration="1500">
    </paper-toast>

  </template>
  <script>
    Polymer('socobo-signup-popup', socoboLogoutPopup);
  </script>
</polymer-element>